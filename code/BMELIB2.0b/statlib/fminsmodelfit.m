function [f]=fminsmodelfit(param,d,v,o,model,nc,nm,np);% fminsmodelfit             - fminsearch subroutine for modelfit.m (Jan 1,2001)%% Objective function used by the modelfit.m function for% minimizing a weighted sum of squares (see modelfit.m).%% SYNTAX :%% [f]=fminsmodelfit(param,d,v,o,model,nc,nm,np);vtheor=zeros(nc,1);index=0;for i=1:nm,  parami=param(index+1:index+np(i));  vtheor=vtheor+eval([model{i},'(d,parami)']);  index=index+np(i);end;f=o'*(((v-vtheor)./vtheor).^2);